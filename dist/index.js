"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const blockchain_1 = require("./blockchain");
const express = require("express");
const bodyParser = require("body-parser");
var app = express();
let jsonParser = bodyParser.json();
app.get('/', function (req, res) {
    res.send('Hello block chain');
});
app.get('/mine', (req, res) => {
    const chain = blockchain_1.Blockchain.Instance();
    chain.mine().then(block => {
        const blk = chain.createBlock(block.proof, block.previousHash);
        res.send(JSON.stringify(blk));
    })
        .catch((e) => res.send(e));
});
app.get('/chain', (req, res) => {
    const chain = blockchain_1.Blockchain.Instance();
    return JSON.stringify(chain.chain());
});
app.post('/transaction/new', jsonParser, function (req, res) {
    let message = req.body;
    let blockID = blockchain_1.Blockchain.Instance().createTransaction(message.sender, message.recipient, message.amount);
    const msg = 'transaction will be added to block ' + blockID;
    res.send(msg);
});
app.listen(3024);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSw2Q0FBMEM7QUFFMUMsbUNBQW1DO0FBQ25DLDBDQUEwQztBQUUxQyxJQUFJLEdBQUcsR0FBRyxPQUFPLEVBQUUsQ0FBQTtBQUNuQixJQUFJLFVBQVUsR0FBRyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUM7QUFFbkMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsVUFBVSxHQUFHLEVBQUUsR0FBRztJQUM3QixHQUFHLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUE7QUFDL0IsQ0FBQyxDQUFDLENBQUE7QUFFRixHQUFHLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsRUFBRTtJQUUxQixNQUFNLEtBQUssR0FBRyx1QkFBVSxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBRXBDLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7UUFDdEIsTUFBTSxHQUFHLEdBQUcsS0FBSyxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUMvRCxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUNqQyxDQUFDLENBQUM7U0FDRCxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNoQyxDQUFDLENBQUMsQ0FBQztBQUVILEdBQUcsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFO0lBRTNCLE1BQU0sS0FBSyxHQUFHLHVCQUFVLENBQUMsUUFBUSxFQUFFLENBQUM7SUFFcEMsTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUM7QUFDekMsQ0FBQyxDQUFDLENBQUM7QUFFSCxHQUFHLENBQUMsSUFBSSxDQUFDLGtCQUFrQixFQUFFLFVBQVUsRUFBRSxVQUFVLEdBQUcsRUFBRSxHQUFHO0lBQ3ZELElBQUksT0FBTyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUM7SUFFdkIsSUFBSSxPQUFPLEdBQUcsdUJBQVUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3pHLE1BQU0sR0FBRyxHQUFXLHFDQUFxQyxHQUFHLE9BQU8sQ0FBQztJQUNwRSxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBRWxCLENBQUMsQ0FBQyxDQUFDO0FBQ0gsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQSJ9